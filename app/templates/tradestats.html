{% extends "base.html" %}
{% block content %}
<style>
#plpie {
	width		: 100%;
	height		: 250px;
	font-size	: 11px;
}
</style>

<!-- Converts our simple HTML table into a DataTable -->
<script>
$(document).ready(function($) {
    $("#trades").dataTable({
        paging: false,
        searching: false,
        info: false
    });
});
</script>

<!-- Chart code -->
<script>
var chart = AmCharts.makeChart("plpie", {
    "type": "pie",
    "theme": "light",
    "innerRadius": "40%",
    "gradientRatio": [-0.4, -0.4, -0.4, -0.4, -0.4, -0.4, 0, 0.1, 0.2, 0.1, 0, -0.2, -0.5],
    "dataProvider": [{
        "p/l": "Profit",
        "amount": '{{summary.count_profit|safe}}'
    }, {
        "p/l": "Loss",
        "amount": '{{summary.count_loss|safe}}'
    }],
    "balloonText": "[[value]]",
    "valueField": "amount",
    "titleField": "profit / loss",
    "balloon": {
        "drop": true,
        "adjustBorderColor": false,
        "color": "#FFFFFF",
        "fontSize": 16
    },
    "export": {
        "enabled": false
    }
});
</script>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-12" style="text-align: center"><h3>{{summary.system_id}} {{summary.exchange_name}} {{summary.symbol}}</h3></div>
    </div>
    <div class="row">
        <div class="col-md-9">
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-hover" id="trades" width="100%">
                    <thead class="thead-dark">
                        <tr>
                            <th style="text-align:center; vertical-align:middle">Entry Date</th>
                            <th style="text-align:center; vertical-align:middle">Exit Date</th>
                            <th style="text-align:center; vertical-align:middle">Days in Trade</th>
                            <th style="text-align:center; vertical-align:middle">Entry Price</th>
                            <th style="text-align:center; vertical-align:middle">Exit Price</th>
                            <th style="text-align:center; vertical-align:middle">Profit</th>
                            <!--<th style="text-align:center; vertical-align:middle">Commentary</th>-->
                        </tr>
                    </thead>
                    {% for trade in trades %}
                    <tr class="clickable-row" style="cursor: pointer" data-href="">
                        <td>{{trade.entry_date}}</td>
                        <td>{{trade.exit_date}}</td>
                        <td>{{trade.days_in_trade}}</td>
                        <td>{{trade.entry_price}}</td>
                        <td>{{trade.exit_price}}</td>
                        <td>{{trade.profit}}</td>
                        <!--<td>{{trade.trade_commentary}}</td>-->
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="col-md-3">
            <div id="plpie"></div>
        </div>
    </div>
</div>
{% endblock %}